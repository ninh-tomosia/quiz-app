
  <!-- Main -->
  <div class="content">
    <div class="ticket-group">
      <h2><%= Ticket.find(@questions.first.ticket_id).name_ticket if @questions.first != nil %></h2>
      <%= form_tag exam_handle_example_path, method: :post do %>
        <div class="infor-ticket-example-ques-ans">
          <div class="count-question">
            <span id="count-item">1</span> / <span><%= @questions.count %></span>
            <input type="text" name="count" value="<%= @questions.count %>" hidden>
          </div>
          <div class="time-progress-bar">
            <div class="progress">
              <div id="time-bar-ticket" class="progress-bar" role="progressbar"  aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
          </div>
          <div class="time-ticket">
            <input name="time_quiz" id="time-exam" value=<%= Ticket.find(@questions.first.ticket_id).time_quiz %> hidden >
            <b><i class="far fa-clock"></i></b> <span id="count"></span>
            <input name="time_comple" id="time-comple" value="" hidden >
          </div>
        </div>      
        <div class="ans-ques-group">
          <div class="ticket-question ticket-question-cs">
            <p class="question"><i class="fas fa-star"></i> Question <span id="question-index">1</span>:</p>
          </div>
          <%= render partial: "form_exam", collection: @questions, as: "question" %>
        </div>
        <div class="pagination-ticket">
          <a id="prev" onclick="plusSlides(-1)">Prev</a>
          <a id="next" onclick="plusSlides(1)">Next</a>
          <button id="btn-submit" type="submit" name="submit" class="btn btn-primary">Submit</button>
        </div>
      <% end %>
    </div>
  </div>


<script>

  var count = document.getElementById('time-exam').value * 1000 * 60 + 2000
  var date = Date.parse(new Date()) + count;
  var width = 100;
  var progressbar = document.getElementById('time-bar-ticket');
  var width_sec = document.getElementById('time-exam').value;

  var interval = setInterval(function(){
    var now = new Date()
    var countdown = date - now;
    var hours = Math.floor((countdown % (1000 *60 * 60 * 24))/(1000 * 60 * 60)) ;
    var minutes = Math.floor((countdown % (1000 * 60 * 60))/(1000 * 60));
    var seconds = Math.floor((countdown % (1000 * 60))/1000);
    document.getElementById("time-comple").value = countdown;
    // count--;
    if (countdown < 0){
      clearInterval(interval);
    }else{
      if (hours < 10){hours = '0' + hours;}
      if (minutes < 10){minutes = "0" + minutes;}
      if (seconds < 10){seconds = "0" + seconds;}
      width -= 100 / (60 * width_sec);
      progressbar.style.width = width + "%";
      if (hours == 0 && minutes < 10 && minutes > 5){
        progressbar.style.background = "#FF6600";
      }else{
        if (hours == 0 && minutes < 5 && minutes > 0){progressbar.style.background = "#FF0000";}
        else{
          if(hours == 0 && minutes == 0 && seconds == 0){progressbar.style.width = "0%";}
        }
      }
      document.getElementById('count').innerHTML = hours + ":" + minutes + ":" + seconds;
    }
  }, 1000);

  // show answer question
  var slideIndex = 1;
  showSlides(slideIndex);

  function plusSlides(n) {
    showSlides(slideIndex += n);
  }

  function showSlides(n) {
    var i;
    var slides = document.getElementsByClassName("mySlides");
    document.getElementById('count-item').innerHTML = n;
    document.getElementById('question-index').innerHTML = n;
    if (n >= slides.length) {
      document.getElementById('next').style.display = "none";
      document.getElementById('btn-submit').style.display = "block";
    }else{
      if (n == 1) {
        document.getElementById('prev').style.display = "none";
        // document.getElementById('next').style.display = "block";
      }else{
        document.getElementById('prev').style.display = "block";
        document.getElementById('next').style.display = "block";
        document.getElementById('btn-submit').style.display = "none";
      }
    } 
    for (i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";  
    }
    slides[slideIndex-1].style.display = "block";  
  }
</script>